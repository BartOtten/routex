<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.40.0">
    <meta name="project" content="Routex v1.3.2">


    <title>Routex.Processing â€” Routex v1.3.2</title>

    <link rel="stylesheet" href="dist/html-elixir-PEPNOX6A.css" />

    <script defer src="dist/sidebar_items-F1153462.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-E23W6NAF.js"></script>

    <link rel="stylesheet" href="assets/doc.css">

    
  </head>
  <body>
    <script>(() => {
  // js/constants.js
  var t = "ex_doc:settings", e = "dark";
  var o = "dark", s = "light";

  // js/sidebar/constants.js
  var E = "sidebar_state", n = "closed";
  var r = "sidebar_width";
  var a = "sidebar-open";

  // js/entry/inline_html.js
  var i = new URLSearchParams(window.location.search), S = i.get("theme") || JSON.parse(localStorage.getItem(t) || "{}").theme;
  (S === o || S !== s && window.matchMedia("(prefers-color-scheme: dark)").matches) && document.body.classList.add(e);
  var d = sessionStorage.getItem(E), A = d !== n && !window.matchMedia(`screen and (max-width: ${768}px)`).matches;
  document.body.classList.toggle(a, A);
  var c = sessionStorage.getItem(r);
  c && document.body.style.setProperty("--sidebarWidth", `${c}px`);
  var p = /(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);
  document.documentElement.classList.toggle("apple-os", p);
})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="readme.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Routex" />
        </a>

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
Routex
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.3.2
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="Pages"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Routex</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Routex.Processing</span> 
      <small class="app-vsn" translate="no">(Routex v1.3.2)</small>

    </h1>

<a href="Routex.Processing.md" title="Copy Markdown (hold Ctrl/Cmd and click it to open as Markdown)" class="copy-markdown icon-action" rel="help">
  <i class="ri-markdown-line" aria-hidden="true"></i>
  <span class="sr-only">Copy Markdown</span>
</a>



      <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>This module provides everything needed to process Phoenix routes. It executes
the <code class="inline">transform</code> callbacks from extensions to transform <code class="inline">Phoenix.Router.Route</code>
structs and <code class="inline">create_helpers</code> callbacks to create one unified Helper module.</p><p><strong>Powerful but thin</strong>
Although Routex is able to influence the routes in Phoenix applications in profound
ways, the framework and its extensions are a surprisingly lightweight piece
of compile-time middleware. This is made possible by the way router modules
are pre-processed by <a href="https://hexdocs.pm/phoenix/1.8.3/Phoenix.Router.html"><code class="inline">Phoenix.Router</code></a> itself.</p><p>Prior to compilation of a router module, Phoenix Router registers all routes
defined in the router module using the attribute <code class="inline">@phoenix_routes</code>. Each
route is at that stage a <code class="inline">Phoenix.Router.Route</code> struct.</p><p>Any route enclosed in a <code class="inline">preprocess_using</code> block has received a <code class="inline">:private</code>
field in which Routex has put which Routex backend to use for that
particular route. By enumerating the routes, we can process each route using
the properties of this configuration and set struct values accordingly. This
processing is nothing more than (re)mapping the Route structs' values.</p><p>After the processing by Routex is finished, the <code class="inline">@phoenix_routes</code> attribute
in the router is erased and re-populated with the list of mapped
Phoenix.Router.Route structs.</p><p>Once the router module enters the compilation stage, Routex is already out of
the picture and route code generation is performed by Phoenix Router.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:extension_module/0" data-no-tooltip="" translate="no">extension_module()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:helper_module/0" data-no-tooltip="" translate="no">helper_module()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#__before_compile__/1" data-no-tooltip="" translate="no">__before_compile__(env)</a>

      </div>

        <div class="summary-synopsis"><p>Callback executed before compilation of a <code class="inline">Phoenix Router</code>. This callback is added
to the <code class="inline">@before_compile</code> callbacks by <a href="Routex.Router.html"><code class="inline">Routex.Router</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add_callbacks_map/1" data-no-tooltip="" translate="no">add_callbacks_map(routes_per_backend)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#execute_callback/4" data-no-tooltip="" translate="no">execute_callback(callback, backend, extension_module, args)</a>

      </div>

        <div class="summary-synopsis"><p>Executes the specified callback for an extension and returns the result.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#execute_callbacks/1" data-no-tooltip="" translate="no">execute_callbacks(env)</a>

      </div>

        <div class="summary-synopsis"><p>The main function of this module. Receives as only argument the environment of a
Phoenix router module.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#execute_callbacks/2" data-no-tooltip="" translate="no">execute_callbacks(env, routes)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#transform_routes_per_backend/2" data-no-tooltip="" translate="no">transform_routes_per_backend(backend_routes_callbacks, env)</a>

      </div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>

    <div class="types-list">
<section class="detail" id="t:extension_module/0">

  <div class="detail-header">
    <a href="#t:extension_module/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">extension_module()</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L34" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> extension_module() :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:helper_module/0">

  <div class="detail-header">
    <a href="#t:helper_module/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">helper_module()</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L35" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> helper_module() :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>

    <div class="functions-list">
<section class="detail" id="__before_compile__/1">

  <div class="detail-header">
    <a href="#__before_compile__/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">__before_compile__(env)</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L42" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> __before_compile__(<a href="Routex.Types.html#t:env/0">Routex.Types.env</a>()) :: :ok</pre>

      </div>

<p>Callback executed before compilation of a <code class="inline">Phoenix Router</code>. This callback is added
to the <code class="inline">@before_compile</code> callbacks by <a href="Routex.Router.html"><code class="inline">Routex.Router</code></a>.</p>
  </section>
</section>
<section class="detail" id="add_callbacks_map/1">

  <div class="detail-header">
    <a href="#add_callbacks_map/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">add_callbacks_map(routes_per_backend)</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L140" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="execute_callback/4">

  <div class="detail-header">
    <a href="#execute_callback/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">execute_callback(callback, backend, extension_module, args)</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L313" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Executes the specified callback for an extension and returns the result.</p>
  </section>
</section>
<section class="detail" id="execute_callbacks/1">

  <div class="detail-header">
    <a href="#execute_callbacks/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">execute_callbacks(env)</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L56" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> execute_callbacks(<a href="Routex.Types.html#t:env/0">Routex.Types.env</a>()) :: :ok</pre>

      </div>

<p>The main function of this module. Receives as only argument the environment of a
Phoenix router module.</p>
  </section>
</section>
<section class="detail" id="execute_callbacks/2">

  <div class="detail-header">
    <a href="#execute_callbacks/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">execute_callbacks(env, routes)</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L67" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> execute_callbacks(<a href="Routex.Types.html#t:env/0">Routex.Types.env</a>(), <a href="Routex.Types.html#t:routes/0">Routex.Types.routes</a>()) :: :ok</pre>

      </div>


  </section>
</section>
<section class="detail" id="transform_routes_per_backend/2">

  <div class="detail-header">
    <a href="#transform_routes_per_backend/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">transform_routes_per_backend(backend_routes_callbacks, env)</h1>


        <a href="https://github.com/BartOtten/routex/blob/v1.3.2/lib/routex/processing.ex#L160" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>

    </div>
  </section>

    <footer class="footer">

        <p>

            <span class="line">
              <a href="https://hex.pm/packages/routex/1.3.2">Hex Package</a>

              <a href="https://preview.hex.pm/preview/routex/1.3.2">Hex Preview</a>

            </span>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Go to package docs">
              Go to package docs
            </button>

              <a href="llms.txt" target="_blank">
                View llms.txt
              </a>


              <a href="Routex.epub">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.40.0) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>


    </footer>
  </div>
</main>
</div>

  </body>
</html>
